
/******************************************************************************************
 *
 *		jQuery SimpleOverlay
 *		-----------------------------------------------------------------------------------		
 *		Developer: Rogerio Pinto
 *		Website: http://www.rogeriopinto.com
 *		Date: 10-10-2011
 *		
 ***/

(function(e){e.fn.SimpleOverlay=function(w){function k(){var a=e(window);f={width:a.width(),height:a.height(),scrollTop:a.scrollTop()}}function o(){var a=e(document.body);g={width:a.width(),height:a.height()}}function r(){var a=c.position().top+c.outerHeight();j.css({width:g.width,height:a>g.height?a+50:f.height>g.height?f.height:g.height})}function x(){e(window).bind("resize",s);b.afterShow()}function y(){j.css({display:"none"});b.afterHide()}function t(){b.hasCloseBtn&&(l=e("<a></a>").attr({"class":b.closeBtnClass,
href:"#",title:"close"}).text(b.closeBtnText).click(function(a){a.preventDefault();b.onCloseBtnClick()&&p()}).appendTo(c))}function m(){b.hasCloseBtn&&l.css("display","none")}function n(){b.hasCloseBtn&&l.css("display","block")}function z(){c.css({display:"none"})}function q(a,c){var e=f.scrollTop+b.overlayDefaultTop,d=f.scrollTop+(g.height<f.height?g.height:f.height)/2-c/1.5;if(b.overlayFixedTop||d<e)d=e;return{top:d,left:a>g.width?b.overlayDefaultLeft:g.width/2-a/2}}function A(){n();b.afterShowContent()}
function B(){b.afterHideContent()}function p(){b.beforeHide();i.call(c,{style:{opacity:0},after:z});i.call(j,{style:{opacity:0},after:y});e(window).unbind("resize",s)}function u(){b.beforeShow();k();o();v();c.css({opacity:0,display:"block"});i.call(c,{style:{opacity:1},after:n});r();j.css({opacity:0,display:"block"});i.call(j,{style:{opacity:b.fallbackOpacity},after:x})}function s(){setTimeout(function(){k();o();v();r()},100)}var b=e.extend({duration:300,effect:"linear",transited:function(){return typeof Modernizr!=
"undefined"&&Modernizr.csstransitions},fallbackId:"fallback",fallbackOpacity:0.4,clickableFallback:true,overlayQuery:".overlay",overlayClass:"overlay",overlayDefaultTop:20,overlayDefaultLeft:20,overlayFixedTop:false,contentClass:"content",hasCloseBtn:true,closeBtnClass:"close",closeBtnText:"x",onInitialize:function(){},onClick:function(){return true},onCloseBtnClick:function(){return true},onFallbackClick:function(){return true},beforeShow:function(){},afterShow:function(){},beforeHide:function(){},
afterHide:function(){},beforeShowContent:function(){},afterShowContent:function(){},beforeHideContent:function(){},afterHideContent:function(){},beforeResize:function(){},afterResize:function(){},beforeSetContent:function(){},afterSetContent:function(){},beforeAddContent:function(){},afterAddContent:function(){}},w),f=null,g=null,j=null,c=null,d=null,l=null,i=b.transited()?function(a){var a=e.extend({style:{},duration:b.duration,after:function(){}},a),c=[],d;for(d in a.style)c.push(d+" "+a.duration+
"ms ease-in-out");d=c.join(",");this.css(e.extend({"-webkit-transition":d,"-moz-transition":d,"-ms-transition":d,"-o-transition":d,transition:d},a.style));setTimeout(a.after,a.duration)}:function(a){a=e.extend({style:{},duration:b.duration,after:function(){}},a);this.animate(a.style,a.duration,b.effect,a.after)},v=b.transited()?function(){var a=q(c.outerWidth(),c.outerHeight());c.css({margin:0});i.call(c,{style:{top:a.top,left:a.left}})}:function(){var a=q(c.outerWidth(),c.outerHeight());c.css({margin:0,
top:a.top,left:a.left})};this.show=function(){u();return this};this.hide=function(){p();return this};this.disableClickableFallback=function(){b.clickableFallback=false;return this};this.enableClickableFallback=function(){b.clickableFallback=true;return this};this.enableClose=function(){b.hasCloseBtn=true;l||t();return this};this.disableClose=function(){m();b.hasCloseBtn=false;return this};this.showCloseButton=function(){n();return this};this.hideCloseButton=function(){m();return this};this.resize=
function(a){a=e.extend({hideCloseBtn:true},a);b.beforeResize();var h=e.extend({width:d.width(),height:d.height()},a);d.css({width:h.width,height:h.height});h=e.extend({animate:true,showContent:false,positioning:true,width:d.outerWidth(true),height:d.outerHeight(true)},a);k();o();var f=c.outerWidth()-c.width(),g=c.outerWidth()-c.width(),f=q(h.width+f,h.height+g);i.call(c,{style:h.positioning?{width:h.width+"px",height:h.height+"px",top:f.top,left:f.left}:{width:h.width+"px",height:h.height+"px"},duration:h.animate?
b.duration:0,after:b.afterResize});a.hideCloseBtn&&(m(),setTimeout(n,b.duration));return this};this.hideContent=function(a){a=e.extend({animate:true},a);b.beforeHideContent();m();i.call(d,{style:{opacity:0},duration:a.animate?b.duration:0,after:B});return this};this.showContent=function(a){a=e.extend({animate:true},a);b.beforeShowContent();d.css({opacity:0});i.call(d,{style:{opacity:1},duration:a.animate?b.duration:0,after:A});return this};this.setContent=function(a){typeof a=="undefined"&&(a="");
b.beforeSetContent();d.html(a);b.afterSetContent();return this};this.addContent=function(a){typeof a=="undefined"&&(a="");b.beforeAddContent();d.append(a);b.afterAddContent();return this};this.getContentRef=function(){return d};this.getMaxContentDims=function(){k();var a=c.outerWidth()-d.innerWidth(),e=c.outerHeight()-d.innerHeight();return{width:f.width-a-b.overlayDefaultLeft*2,height:f.height-e-b.overlayDefaultTop*2}};(function(){j=e("<div />").attr({id:b.fallbackId}).click(function(){b.clickableFallback&&
b.onFallbackClick()&&p()}).appendTo(document.body)})();c=e(b.overlayQuery);c.length==0&&(c=e("<div />").attr({"class":b.overlayClass}).appendTo(document.body));d=c.find("."+b.contentClass);d.length==0&&(d=e("<div />").attr({"class":b.contentClass}).appendTo(c));t();b.onInitialize();return this.click(function(a){a.preventDefault();var c=e(this);b.onClick.call(c,a)&&u()})}})(jQuery);




















