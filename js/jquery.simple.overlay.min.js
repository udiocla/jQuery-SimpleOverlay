
/******************************************************************************************
 *
 *		jQuery SimpleOverlay
 *		-----------------------------------------------------------------------------------		
 *		Developer: Rogerio Pinto
 *		Website: http://www.rogeriopinto.com
 *		Date: 10-10-2011
 *		
 ***/
(function(e){e.fn.SimpleOverlay=function(w){function k(){var a=e(window);g={width:a.width(),height:a.height(),scrollTop:a.scrollTop()}}function o(){var a=e(document.body);i={width:a.width(),height:a.height()}}function s(){var a=c.position().top+c.outerHeight(),a=a>i.height?a+50:g.height>i.height?g.height:i.height,b=f.height();f.css({width:i.width,height:b<a?a:b})}function x(){e(window).bind("resize",p);b.afterShow()}function y(){f.css({display:"none"});b.afterHide()}function t(){b.hasCloseBtn&&(l=
e("<a></a>").attr({"class":b.closeBtnClass,href:"#",title:"close"}).text(b.closeBtnText).click(function(a){a.preventDefault();b.onCloseBtnClick()&&q()}).appendTo(c))}function m(){b.hasCloseBtn&&l.css("display","none")}function n(){b.hasCloseBtn&&l.css("display","block")}function z(){c.css({display:"none"})}function r(a,c){var e=g.scrollTop+b.overlayDefaultTop,d=g.scrollTop+(i.height<g.height?i.height:g.height)/2-c/2;if(b.overlayFixedTop||d<e)d=e;return{top:d,left:a>i.width?b.overlayDefaultLeft:i.width/
2-a/2}}function A(){n();b.afterShowContent()}function B(){b.afterHideContent()}function q(){b.beforeHide();j.call(c,{style:{opacity:0},after:z});j.call(f,{style:{opacity:0},after:y});e(window).unbind("resize",p)}function u(){b.beforeShow();k();o();v();c.css({opacity:0,display:"block"});j.call(c,{style:{opacity:1},after:n});s();f.css({opacity:0,display:"block"});j.call(f,{style:{opacity:b.fallbackOpacity},after:x})}function p(){setTimeout(function(){k();o();v();s()},100)}var b=e.extend({duration:300,
effect:"linear",transited:function(){return"undefined"!=typeof Modernizr&&Modernizr.csstransitions},fallbackId:"fallback",fallbackOpacity:0.4,clickableFallback:!0,overlayQuery:".overlay",overlayClass:"overlay",overlayDefaultTop:20,overlayDefaultLeft:20,overlayFixedTop:!1,contentQuery:".content",contentClass:"content",hasCloseBtn:!0,closeBtnClass:"close",closeBtnText:"x",onInitialize:function(){},onClick:function(){return!0},onCloseBtnClick:function(){return!0},onFallbackClick:function(){return!0},
beforeShow:function(){},afterShow:function(){},beforeHide:function(){},afterHide:function(){},beforeShowContent:function(){},afterShowContent:function(){},beforeHideContent:function(){},afterHideContent:function(){},beforeResize:function(){},afterResize:function(){},beforeSetContent:function(){},afterSetContent:function(){},beforeAddContent:function(){},afterAddContent:function(){}},w),g=null,i=null,f=null,c=null,d=null,l=null,j=b.transited()?function(a){var a=e.extend({style:{},duration:b.duration,
after:function(){}},a),c=[],d;for(d in a.style)c.push(d+" "+a.duration+"ms ease-in-out");d=c.join(",");this.css(e.extend({"-webkit-transition":d,"-moz-transition":d,"-ms-transition":d,"-o-transition":d,transition:d},a.style));setTimeout(a.after,a.duration)}:function(a){a=e.extend({style:{},duration:b.duration,after:function(){}},a);this.animate(a.style,a.duration,b.effect,a.after)},v=b.transited()?function(){var a=r(c.outerWidth(),c.outerHeight());c.css({margin:0});b.overlayFixedTop?j.call(c,{style:{left:a.left}}):
j.call(c,{style:{top:a.top,left:a.left}})}:function(){var a=r(c.outerWidth(),c.outerHeight());b.overlayFixedTop?c.css({margin:0,left:a.left}):c.css({margin:0,top:a.top,left:a.left})};this.show=function(){u();return this};this.hide=function(){q();return this};this.refresh=function(){p();return this};this.disableClickableFallback=function(){b.clickableFallback=!1;return this};this.enableClickableFallback=function(){b.clickableFallback=!0;return this};this.enableClose=function(){b.hasCloseBtn=!0;l||
t();return this};this.disableClose=function(){m();b.hasCloseBtn=!1;return this};this.showCloseButton=function(){n();return this};this.hideCloseButton=function(){m();return this};this.resize=function(a){a=e.extend({hideCloseBtn:!0},a);b.beforeResize();var h=e.extend({width:d.width(),height:d.height()},a);d.css({width:h.width,height:h.height});h=e.extend({animate:!0,showContent:!1,positioning:!0,width:d.outerWidth(!0),height:d.outerHeight(!0)},a);k();o();var f=c.outerWidth()-c.width(),g=c.outerWidth()-
c.width(),f=r(h.width+f,h.height+g);j.call(c,{style:h.positioning?{width:h.width+"px",height:h.height+"px",top:f.top,left:f.left}:{width:h.width+"px",height:h.height+"px"},duration:h.animate?b.duration:0,after:b.afterResize});a.hideCloseBtn&&(m(),setTimeout(n,b.duration));return this};this.hideContent=function(a){a=e.extend({animate:!0},a);b.beforeHideContent();m();j.call(d,{style:{opacity:0},duration:a.animate?b.duration:0,after:B});return this};this.showContent=function(a){a=e.extend({animate:!0},
a);b.beforeShowContent();d.css({opacity:0});j.call(d,{style:{opacity:1},duration:a.animate?b.duration:0,after:A});return this};this.setContent=function(a){"undefined"==typeof a&&(a="");b.beforeSetContent();d.html(a);b.afterSetContent();return this};this.addContent=function(a){"undefined"==typeof a&&(a="");b.beforeAddContent();d.append(a);b.afterAddContent();return this};this.getContentRef=function(){return d};this.getMaxContentDims=function(){k();var a=c.outerWidth()-d.innerWidth(),e=c.outerHeight()-
d.innerHeight();return{width:g.width-a-2*b.overlayDefaultLeft,height:g.height-e-2*b.overlayDefaultTop}};(function(){f=e("#"+b.fallbackId);0==f.length&&(f=e("<div />").attr({id:b.fallbackId}).appendTo(document.body));f.click(function(){b.clickableFallback&&b.onFallbackClick()&&q()})})();c=e(b.overlayQuery);0==c.length&&(c=e("<div />").attr({"class":b.overlayClass}).appendTo(document.body));d=c.find(b.contentQuery);0==d.length&&(d=e("<div />").attr({"class":b.contentClass}).appendTo(c));t();b.onInitialize.call(this);
return this.click(function(a){a.preventDefault();var c=e(this);b.onClick.call(c,a)&&u()})}})(jQuery);




















