
/******************************************************************************************
 *
 *		jQuery SimpleOverlay
 *		-----------------------------------------------------------------------------------		
 *		Developer: Rogerio Pinto
 *		Website: http://www.rogeriopinto.com
 *		Date: 10-10-2011
 *		
 ***/

(function(e){e.fn.SimpleOverlay=function(v){function j(){var a=e(window);f={width:a.width(),height:a.height(),scrollTop:a.scrollTop()}}function n(){var a=e(document.body);g={width:a.width(),height:a.height()}}function q(){var a=d.position().top+d.outerHeight();i.css({width:g.width,height:a>g.height?a+50:f.height>g.height?f.height:g.height})}function w(){e(window).bind("resize",r);b.afterShow()}function x(){i.css({display:"none"});b.afterHide()}function s(){b.hasCloseBtn&&(k=e("<a></a>").attr({"class":b.closeBtnClass,
href:"#",title:"close"}).text(b.closeBtnText).click(function(a){a.preventDefault();b.onCloseBtnClick()&&o()}).appendTo(d))}function l(){b.hasCloseBtn&&k.css("display","none")}function m(){b.hasCloseBtn&&k.css("display","block")}function y(){d.css({display:"none"})}function p(a,d){var e=f.scrollTop+b.overlayDefaultTop,c=f.scrollTop+(g.height<f.height?g.height:f.height)/2-d/1.5;if(b.overlayFixedTop||c<e)c=e;return{top:c,left:a>g.width?b.overlayDefaultLeft:g.width/2-a/2}}function z(){m();b.afterResize()}
function A(){m();b.afterShowContent()}function B(){b.afterHideContent()}function o(){b.beforeHide();h.call(d,{style:{opacity:0},after:y});h.call(i,{style:{opacity:0},after:x});e(window).unbind("resize",r)}function t(){b.beforeShow();j();n();u();d.css({opacity:0,display:"block"});h.call(d,{style:{opacity:1},after:m});q();i.css({opacity:0,display:"block"});h.call(i,{style:{opacity:b.fallbackOpacity},after:w})}function r(){setTimeout(function(){j();n();u();q()},100)}var b=e.extend({duration:300,effect:"linear",
transited:function(){return typeof Modernizr!="undefined"&&Modernizr.csstransitions},fallbackId:"fallback",fallbackOpacity:0.4,clickableFallback:true,overlayQuery:".overlay",overlayClass:"overlay",overlayDefaultTop:20,overlayDefaultLeft:20,overlayFixedTop:false,contentClass:"content",hasCloseBtn:true,closeBtnClass:"close",closeBtnText:"x",onInitialize:function(){},onClick:function(){return true},onCloseBtnClick:function(){return true},onFallbackClick:function(){return true},beforeShow:function(){},
afterShow:function(){},beforeHide:function(){},afterHide:function(){},beforeShowContent:function(){},afterShowContent:function(){},beforeHideContent:function(){},afterHideContent:function(){},beforeResize:function(){},afterResize:function(){},beforeSetContent:function(){},afterSetContent:function(){},beforeAddContent:function(){},afterAddContent:function(){}},v),f=null,g=null,i=null,d=null,c=null,k=null,h=b.transited()?function(a){var a=e.extend({style:{},duration:b.duration,after:function(){}},a),
d=[],c;for(c in a.style)d.push(c+" "+a.duration+"ms ease-in-out");c=d.join(",");this.css(e.extend({"-webkit-transition":c,"-moz-transition":c,"-ms-transition":c,"-o-transition":c,transition:c},a.style));setTimeout(a.after,a.duration)}:function(a){a=e.extend({style:{},duration:b.duration,after:function(){}},a);this.animate(a.style,a.duration,b.effect,a.after)},u=b.transited()?function(){var a=p(d.outerWidth(),d.outerHeight());d.css({margin:0});h.call(d,{style:{top:a.top,left:a.left}})}:function(){var a=
p(d.outerWidth(),d.outerHeight());d.css({margin:0,top:a.top,left:a.left})};this.show=function(){t();return this};this.hide=function(){o();return this};this.disableClickableFallback=function(){b.clickableFallback=false;return this};this.enableClickableFallback=function(){b.clickableFallback=true;return this};this.enableClose=function(){b.hasCloseBtn=true;k||s();return this};this.disableClose=function(){l();b.hasCloseBtn=false;return this};this.showCloseButton=function(){m();return this};this.hideCloseButton=
function(){l();return this};this.resize=function(a){l();b.beforeResize();var f=e.extend({width:c.width(),height:c.height()},a);c.css({width:f.width,height:f.height});a=e.extend({animate:true,showContent:false,positioning:true,width:c.outerWidth(true),height:c.outerHeight(true)},a);j();n();f=p(a.width,a.height);h.call(d,{style:a.positioning?{width:a.width+"px",height:a.height+"px",top:f.top,left:f.left}:{width:a.width+"px",height:a.height+"px"},duration:a.animate?b.duration:0,after:z});return this};
this.hideContent=function(a){a=e.extend({animate:true},a);b.beforeHideContent();l();h.call(c,{style:{opacity:0},duration:a.animate?b.duration:0,after:B});return this};this.showContent=function(a){a=e.extend({animate:true},a);b.beforeShowContent();c.css({opacity:0});h.call(c,{style:{opacity:1},duration:a.animate?b.duration:0,after:A});return this};this.setContent=function(a){typeof a=="undefined"&&(a="");b.beforeSetContent();c.html(a);b.afterSetContent();return this};this.addContent=function(a){typeof a==
"undefined"&&(a="");b.beforeAddContent();c.append(a);b.afterAddContent();return this};this.getContentRef=function(){return c};this.getMaxContentDims=function(){j();var a=d.outerWidth()-c.innerWidth(),e=d.outerHeight()-c.innerHeight();return{width:f.width-a-b.overlayDefaultLeft*2,height:f.height-e-b.overlayDefaultTop*2}};(function(){i=e("<div />").attr({id:b.fallbackId}).click(function(){b.clickableFallback&&b.onFallbackClick()&&o()}).appendTo(document.body)})();d=e(b.overlayQuery);d.length==0&&(d=
e("<div />").attr({"class":b.overlayClass}).appendTo(document.body));c=d.find("."+b.contentClass);c.length==0&&(c=e("<div />").attr({"class":b.contentClass}).appendTo(d));s();b.onInitialize();return this.click(function(a){a.preventDefault();var c=e(this);b.onClick.call(c,a)&&t()})}})(jQuery);




















